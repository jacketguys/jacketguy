<!--reference: https://codeday.me/jp/qa/20190309/384838.html -->
	<h1>買い物かご</h1>
	<div class="col-xs-9" >
		<section class = "purchase-products-box">
			<div class = "purchase-products-box-inner">
				<% if current_end_user.carts.empty? %>
					<h1>草。カートに商品が入っていませ〜んwww</h1>
				<% end %>
				<% current_end_user.carts.each do |cart| %>
				<div class = "purchase-product">
        			<%= attachment_image_tag cart.product, :product_image, size: "100x100", format: 'jpeg', fallback: "no_image.jpg", class: "purchase-product-img"  %>
			      <ul class="purchase-product-name-list">
			      	<strong><%= link_to cart.product.title,product_path(cart.product) %></strong>
			      	<li><%= cart.product.artist.name %></li>
			      	<li><%= cart.product.label.name %></li>
			      	<li><%= cart.product.genre.name %></li>
			      </ul>
			      <h3 class="purchase-product-price">小計:<%= cart.product.price*cart.order_quantity %>円(税込)</h3>
			      <div class = "purchase-product-option">
					<div id="update_button_<%= cart.id %>">
             		  <%= render partial: 'user_carts/update', locals: { cart: cart} %>
          			</div>

					<div id="delete_button_<%= cart.id %>">
             		  <%= render partial: 'user_carts/destroy', locals: { cart: cart} %>
          			</div>

			      </div>
			  	</div>
			  	<% end %>
		  	</div>
		</section>
	</div>



	<div class="col-xs-3">
		<section class = "purchase-box">
			<div class="purchase-box-inner">
				<h3>合計:</h3>
				<% total_price = current_end_user.carts.inject(0){|sum,cart| sum + cart.product.price*cart.order_quantity} %>
				<h3><%= total_price %>円</h3>
				<% if current_end_user.carts.exists? %>
				<div class = "purchase-button">
					<%= link_to '購入手続きへ',user_purchases_new_path(current_end_user), class: "btn-sm btn-warning " %>
					<% end %>
				</div>

				<%= link_to '商品一覧ページへ',root_path %>
			</div>
		</section>
	</div>